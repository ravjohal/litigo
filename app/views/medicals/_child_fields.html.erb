<tr class="nested-fields child_medical_bill">
  <td>
      <%= f.input :provider, label: false, :class => 'table-input' %>
    </td>
     <td>
      <%= f.association :company, label: false, :class => 'table-input' %>
    </td>
    <td>
      <%= f.input :date_of_service, label: false, :class => 'table-input' %>
    </td>
    <td>
      <%= f.select :billed_amount, label: false %>
    </td>
    <td>
      <%= f.select :paid_amount, label: false %>
    </td>
  
  <td class="task-icon"><span id="dependent" title="Dependent Task" class="glyphicon glyphicon-link"></span></td>
  <td class="task-icon">
    <%= link_to_remove_association f, class: 'dark-small' do %><span id="child" class="glyphicon glyphicon-trash" title="Remove Child"></span><% end %>
  </td>
</tr>
<script type="text/javascript" charset="utf-8">
  $("select").select2();
  $('.conjunction-select').on('change', function (e) {
    var after_options = "<%= raw TaskDraft::ANCHOR_DATE.map {|option| "<option value='#{option}'>#{option}</option>"}.join('') %>";
    var before_options = "<%= raw TaskDraft::BEFORE_ANCHOR_DATE.map {|option| "<option value='#{option}'>#{option}</option>"}.join('') %>";
    var raw_name = $(this).attr('name').replace('[conjunction]','');
    var anchor_select = $("select[name='"+raw_name+"[anchor_date]']")
    if($(this).val() == 'before') {
      anchor_select.empty().append(before_options);
    } else if($(this).val() == 'after') {
      anchor_select.empty().append(after_options);
    }
  });
</script>
<script type='text/javascript'>
  $(function() {
    $('#child').tipsy({gravity: 'se', fade: true});
    $('#dependent').tipsy({gravity: 's', fade: true});
  });
</script>