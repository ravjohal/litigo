<% if @case %>
  <ol class="breadcrumb">
    <li><%= link_to 'Cases', cases_path %></li>
    <li><%= link_to @case.name, case_path(@case) %></li>
    <li>Contacts</li>
  </ol>

  <%= render partial: 'shared/case_tabs' %>
<% end %>

<%= render 'new_button' %>

  <div class="table-responsive">
    <table id="tasks" class="table table-striped table-hover rowlink">
      <thead>
      <tr>
        <th>Name</th>
        <th>Contact Type</th>
        <th>Email</th>
        <th>Phone</th>
      </tr>
      </thead>
      <tbody>
      <% @contacts.each do |contact| %>
        <tr data-id="<%= contact.id %>">
          <td><%= link_to "#{contact.last_name} #{contact.first_name}", contact_path(contact) %></td>
          <td><%= contact.type %></td>
          <td><%= contact.email %></td>
          <td><%= contact.phone_number %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>


<div id="modal-window" class="modal fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>

<script type="text/javascript">
$(document).ready(function() {
  $('#new_modal').click(function(event){
    $("#modal-window").html("<%= escape_javascript( render 'contacts/form', new_contact: @contacts_a ) %>");
  });
  var table = $('.table').dataTable({
    language: {
      search: "_INPUT_",
      searchPlaceholder: "Search or Filter"
    },
    aaSorting: [[ 1, "asc" ]]
  });
  $('.table tbody').on( 'click', 'tr', function (e) {
    var id = $(e.currentTarget).data('id');
    $('table.rowlink').rowlink()
  });
});
</script>


