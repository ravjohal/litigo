<%= simple_form_for(new_task) do |f| %>
      <%= f.error_notification %>

    <% if action_name == "index" %>
      <!--only render html from 'if' to 'end' if the controller action this form was rendered from was 'index'; reason for this is because this form is used in 'new' and 'edit' actions; reason we aren't checking for if action_name == 'new' is because this is a modal that is rendered from the index action -->
      <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
             <a class="close" data-dismiss="modal">Ã—</a>
              <h2>New Task</h2>
            </div>
         <div class="modal-body">
    <% end %>

              <div class="form-inputs">
                <%= f.input :name, :label => "Task" %>
                <%= f.association :cases, :collection => @user.cases  %>
                <%= f.input :due_date %>
                <%= f.input :completed %>
                <%= f.input :description %>
              </div>

        <% if action_name == "index" %>            
          </div><!--end of modal-body-->
          
           <div class="modal-footer">
              <div class="pull-left">
                <a class="close" data-dismiss="modal">Cancel</a> 
              </div>
        <% end %>

              <div class="form-actions">
                  <%= f.button :submit, :class =>"btn btn-large btn-primary" %>
              </div>

    <% if action_name == "index" %>        
            </div><!--end of modal-footer-->
        </div><!--end of modal-content-->
      </div><!--end of modal-dialog-->
    <% end %>

<% end %>
  <script>
    $(document).ready(function() { $("#task_select").select2(); });
  </script>
