<% if @case %>
  <ol class="breadcrumb">
    <li><%= link_to 'Cases', cases_path %></li>
    <li><%= link_to @case.name, case_path(@case) %></li>
    <li class="active">Contacts</li>
  </ol>

  <%= render partial: 'shared/case_tabs' %>
<% end %>

<div class="main-container-div">
<%= link_to 'NEW CONTACT', @new_path_contacts, {:class => "action-button", :id => "contact_modal",  :remote => true, 'data-toggle' =>  "modal", 'data-target' => '#modal-window'} %>

  <h3>Contacts</h3>
  </div>
  <div class="table-responsive">
    <table id="tasks" class="table table-striped table-hover rowlink">
      <thead>
      <tr>
        <th>Name</th>
        <th>Contact Type</th>
        <th>Email</th>
        <th>Phone</th>
      </tr>
      </thead>
      <tbody>
      <% @contacts.each do |contact| %>
        <tr data-id="<%= contact.id %>">
          <td><%= link_to "#{contact.last_name} #{contact.first_name}", contact_path(contact) %></td>
          <td><%= contact.type %></td>
          <td><%= contact.email %></td>
          <td><%= contact.phone_number %></td>
        </tr>
      <% end %>
      </tbody>
    </table>
  </div>


<div id="modal-window" class="modal fade" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"></div>

<script type="text/javascript">
$(document).ready(function() {
  $('#contact_modal').click(function(event){
    $("#modal-window").html("<%= escape_javascript( render 'contacts/form', new_contact: @contacts_a ) %>");
  });
  <%= render 'datatable.js' %>
});
</script>


